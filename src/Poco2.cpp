//============================================================================
// Name        : Poco2.cpp
// Author      : Claus Guttesen
// Version     :
// Copyright   : Just let me know.
// Description : Hello World in C++, Ansi-style
//============================================================================

#include "MyHandler.hpp"

using namespace std;

int main() {
	cout << "Poco2 Blåbærsyltetøj" << endl;
	auto s = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><d2LogicalModel modelBaseVersion=\"2\" xmlns=\"http://datex2.eu/schema/2/2_0\"><exchange><supplierIdentification><country>no</country><nationalIdentifier>Norwegian Public Roads Administration</nationalIdentifier></supplierIdentification></exchange><payloadPublication xsi:type=\"MeasurementSiteTablePublication\" lang=\"nob\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><publicationTime>2016-02-19T14:21:30.638+01:00</publicationTime><publicationCreator><country>no</country><nationalIdentifier>Norwegian Public Roads Administration</nationalIdentifier></publicationCreator><headerInformation><confidentiality>noRestriction</confidentiality><informationStatus>real</informationStatus></headerInformation><measurementSiteTable version=\"20160219141823000\" id=\"WOST\"><measurementSiteTableIdentification>WEATHER_OBSERVATION_STATION_TABLE</measurementSiteTableIdentification><measurementSiteRecord version=\"5\" id=\"205\"><measurementSiteName><values><value lang=\"nob\">E6 Rosten</value></values></measurementSiteName><measurementSpecificCharacteristics index=\"801\"><measurementSpecificCharacteristics><specificMeasurementValueType>roadSurfaceConditionInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"301\"><measurementSpecificCharacteristics><specificMeasurementValueType>temperatureInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"201\"><measurementSpecificCharacteristics><specificMeasurementValueType>humidityInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"101\"><measurementSpecificCharacteristics><specificMeasurementValueType>temperatureInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"2501\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"2201\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"1401\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"701\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSiteLocation xsi:type=\"Point\"><pointByCoordinates><pointCoordinates><latitude>61.878387</latitude><longitude>9.415452</longitude></pointCoordinates></pointByCoordinates></measurementSiteLocation></measurementSiteRecord><measurementSiteRecord version=\"5\" id=\"206\"><measurementSiteName><values><value lang=\"nob\">Rv 4 Lygna</value></values></measurementSiteName><measurementSpecificCharacteristics index=\"801\"><measurementSpecificCharacteristics><specificMeasurementValueType>roadSurfaceConditionInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"301\"><measurementSpecificCharacteristics><specificMeasurementValueType>temperatureInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"201\"><measurementSpecificCharacteristics><specificMeasurementValueType>humidityInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"101\"><measurementSpecificCharacteristics><specificMeasurementValueType>temperatureInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"2501\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"2201\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"1401\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"701\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSiteLocation xsi:type=\"Point\"><pointByCoordinates><pointCoordinates><latitude>60.454544</latitude><longitude>10.64202</longitude></pointCoordinates></pointByCoordinates></measurementSiteLocation></measurementSiteRecord><measurementSiteRecord version=\"4\" id=\"207\"><measurementSiteName><values><value lang=\"nob\">E14 Teveldal</value></values></measurementSiteName><measurementSpecificCharacteristics index=\"1001\"><measurementSpecificCharacteristics><specificMeasurementValueType>windInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"901\"><measurementSpecificCharacteristics><specificMeasurementValueType>windInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"801\"><measurementSpecificCharacteristics><specificMeasurementValueType>roadSurfaceConditionInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"301\"><measurementSpecificCharacteristics><specificMeasurementValueType>temperatureInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"201\"><measurementSpecificCharacteristics><specificMeasurementValueType>humidityInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"101\"><measurementSpecificCharacteristics><specificMeasurementValueType>temperatureInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSpecificCharacteristics index=\"2501\"><measurementSpecificCharacteristics><specificMeasurementValueType>precipitationInformation</specificMeasurementValueType></measurementSpecificCharacteristics></measurementSpecificCharacteristics><measurementSiteLocation xsi:type=\"Point\"><pointByCoordinates><pointCoordinates><latitude>63.342346</latitude><longitude>12.029278</longitude></pointCoordinates></pointByCoordinates></measurementSiteLocation></measurementSiteRecord></measurementSiteTable></payloadPublication></d2LogicalModel>";
	MyHandler handler {};
    Poco::XML::SAXParser parser {};
    parser.setFeature(Poco::XML::XMLReader::FEATURE_NAMESPACES, false);
    parser.setFeature(Poco::XML::XMLReader::FEATURE_NAMESPACE_PREFIXES, true);
    parser.setContentHandler(&handler);

    try {
        parser.parseString(s);
//                  parser.parseString(out.str());
    } catch (Poco::Exception& e) {
        cerr << e.displayText() << endl;
    }
	return 0;
}
